# web 架构

最理想的情况是，java之负责业务逻辑，对外，它只提供api数据接口，剩余页面渲染相关的工作都交给前端来完成。

## 传统

在传统的web应用中，java同时负责业务逻辑以及页面的服务器端渲染。这种架构下，前后端开发的模式主要是这样的：

1. 前端开发好demo页面（包括css，js，html）
2. 前端将css，js等静态资源交给cdn等静态服务器，而html文件则交给java后端，让后端将demo页面转为vm模板。

用户请求时，java首先将vm模板渲染成html，然后再交给浏览器。

## 尝试前后分离

### ajax

目前有一种方案是前端页面完全交给javascript来进行纯异步渲染，也就是说html文件也传到cdn上面作为静态文件，当用户请求的时候，页面中的数据通过js的ajax请求来渲染。这样做确实是实现了前后端分离没有错，但是缺点是，首先这种架构下，页面首屏渲染会比较慢，因为在加载好html之后，还要额外通过ajax请求数据然后才能填充页面；此外，由于搜索引擎的爬虫无法爬下js异步渲染的数据，导致这样的页面，SEO(Search Engine Optimization)会存在一定的问题。

### 中间层

另一种方案是使用node作为中间层的方案。在这种架构下，模板都放在node端，当用户发起请求时候，请求首先到达node端，然后node向后端的java请求数据，拿到数据后填充渲染html模板，然后再返还给用户。这个架构下，浏览器端和node端都由前端开发人员来负责，java后端只需要处理业务逻辑并提供api接口，这样既实现了前后端分离，由解决了异步渲染中的种种问题。

